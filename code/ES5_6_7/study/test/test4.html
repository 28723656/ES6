<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<!--
1. 指数运算符(幂): **
2. Array.prototype.includes(value) : 判断数组中是否包含指定value

-->
<script type="text/javascript">

  let tree = [
    { name: 'node1' },
    { name: 'node2', children: [{ name: 'node-2-1' }, { name: 'node2-2' }] },
    { name: 'node3', children: [{ name: 'node-3-1', children: [{ name: 'node3-1-1' }] }, { name: 'node3-2' }] }
  ];
  let key = 'test'
  function parseJson(arr) {
    arr = arr.slice()
    function toParse(arr) {
      arr.forEach(function (item) {
        if (item.children && Array.isArray(item.children)) {
          item[key] = item.children
          toParse(item[key])
        }
        delete item.children
      })
      return arr
    }
    return toParse(arr)
  }

  console.log(parseJson(tree))
</script>
</body>
</html>
