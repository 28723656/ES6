<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--
Set
2020年3月14日19:47:31
-->

</body>
</html>


<script type="text/javascript">

    let log = (...filed) => {
        const { log } = console
        log('\t', ...filed)
    }

    // 初体验一下
    const set = new Set();
    [2, 3, 2, 4, 1, 3, 4].forEach(item => set.add(item))
    for (let value of set) {
        log(value)  // 2 3 4 1
    }

    // Set函数可以接受一个数组（或者具有 iterable 接口的其他数据结构）作为参数，用来初始化。

    // 例子一
    const set1 = new Set([1, 2, 3, 3, 4, 5, 6, 7, 7, 8])
    log([...set1]) // [1,2,3,4,5,6,7,8]

    // 例子二
    const set2 = new Set([1, 2, 3, 4, 5, 5, 5, 5])
    log(set2.size)  // 5

    // important: 数组去重的方法
    const arr = [2, 3, 4, 1, 5, 3, 5, 6]
    const result = [...new Set(arr)]
    log(result)

    // important:去除重复的字符串
    const str = 'abcdsadsdsa'
    const result2 = [...new Set(str)].join('')
    log(result2)

    // set中添加两个NaN是相等的
    let set3 = new Set()
    let str3 = NaN
    let str4 = NaN
    set3.add(str3)
    set3.add(str4)
    log(set3)   // Set{NaN}

    // set中两个对象总是不相等的
    let set5 = new Set()
    let obj5 = {}
    let obj6 = {}
    set5.add(obj5)
    set5.add(obj6)
    log(set5.size, set5) // 2

    // Set实例方法的属性和方法
    /*
    Set.prototype.add(value)：添加某个值，返回 Set 结构本身。
    Set.prototype.delete(value)：删除某个值，返回一个布尔值，表示删除是否成功。
    Set.prototype.has(value)：返回一个布尔值，表示该值是否为Set的成员。
    Set.prototype.clear()：清除所有成员，没有返回值。
     */

    let set7 = new Set()
    set7.add(1).add(2).add(2)
    log(set7.size)

    set7.has(2)
    set7.delete(1)
    set7.clear()

    // Array.from方法可以将set结果转成数组
    const items = new Set([1, 2, 3, 3, 4])
    const array = Array.from(items)

    // important: 数组去重的新方法
    Array.from(new Set([1, 2, 3, 3, 4]))

    // 遍历操作
    // keys()  values() 这2个返回的完全一样
    // entries()
    // forEach()

    let set8 = new Set(['red', 'green', 'black'])
    log(set8.keys(), set8.values())
    log(set8.entries())
    set8.forEach(item => log(item))
    for (let x of set8) {
        log(x)
    }

    // 遍历的应用
    // (1) 去重
    let uniqueArr = [...new Set([1, 2, 3, 3, 4])]

    // (2) map 和 filter方法
    let set9 = new Set([1, 2, 3, 3, 4])
    // set9.map(item => item * 2) // 报错，set没有map和filter方法
    // log(set9)
    let set10 = new Set([...set9].map(item => item * 2))
    log(set10, set9)
    let set11 = new Set([...set9].filter(item => item % 2 == 0))
    log(set11)

    // important: 实现并集，交集差集
    let array1 = new Set([1, 2, 3])
    let array2 = new Set([4, 3, 2])

    // 并集
    let union = new Set([...array1, ...array2])

    // 交集
    let intersect = new Set([...array1].filter(item => array2.has(item)))

    // 差集
    let difference = new Set([...array1].filter(item => !array2.has(item)))

    // 以上set的值是不会改变的，不信的话，请看115行
    // 要想改变set的值，1.给set重新赋值  2.使用Array.from

    // todo:继续复习Array.from的用途
    // 方法一
    let set12 = new Set([1, 2, 3])
    set12 = new Set([...set12].map(val => val * 2))
    log(set12)

    // 方法二
    let set13 = new Set([1, 2, 3])
    set13 = new Set(Array.from(set13, val => val * 2))
    log(set13)


</script>
